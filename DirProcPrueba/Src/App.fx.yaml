App As appinfo:
    BackEnabled: =false
    OnStart: |+
        =Set(varIdArea,0);
        //Set(varUserEmail; User().Email);;
        //Set(varUserFullName; User().FullName);;
        //Set(varMyUser; LookUp(Personal; Email = varUserEmail));;
        
        Set(varMyUser, LookUp(Personal, Email = "526453@unilabs.com"));
        //Set(varMyUser; LookUp(Personal; Email = User().Email));;
        //Set(varUserEmail; varMyUser.Email);;
        Set(varUserFullName, varMyUser.Nombre);
        
        If(IsBlank(varMyUser),
        	Set(varMyUser,
        		Patch(Personal, Defaults(Personal), {Title:varUserFullName,Email:varMyUser.Email,IdPerfil:1,IdArea:0})
        	)
        );
        
        Set(varMyUserArea, LookUp(Area_1, ID = varMyUser.IdArea));
        //Set(MyOrdenFlujo; If(varMyUser.IdArea=1;1;varMyUser.IdArea=2;2;999));;
        Set(varMyAreaEtapaFlujo, LookUp(AreaEtapaFlujo, Orden = If(varMyUser.IdArea=1,1,varMyUser.IdArea=2,2,999)));
        
        
        Set(varGenerar,LookUp(PerfilAccion,IdPerfil=varMyUser.IdPerfil && IdAccion=1).EsPermitido);
        Set(varAsignar,LookUp(PerfilAccion,IdPerfil=varMyUser.IdPerfil && IdAccion=2).EsPermitido);
        Set(varElevar,LookUp(PerfilAccion,IdPerfil=varMyUser.IdPerfil && IdAccion=3).EsPermitido);
        
        Set(varGestionarArea,LookUp(PerfilAccion,IdPerfil=varMyUser.IdPerfil && IdAccion=9).EsPermitido);
        
        
        ClearCollect(colBarraLateral,
            {id_boton:"NuevaSol",texto_boton:"Nueva Solicitud",navegacion:scrNuevaSolicitud,sangria:1,Habilitado:varGenerar},
            {id_boton:"MisSol",texto_boton:"Mis Solicitudes",navegacion:scrMisSolicitudes,sangria:1,Habilitado:true},
            {id_boton:"Sol",texto_boton:"Solicitudes",navegacion:scrSolicitudes,sangria:1,Habilitado:true},
            {id_boton:"Area",texto_boton:"Area",navegacion:scrArea,sangria:1,Habilitado:varGestionarArea}
        )
        

